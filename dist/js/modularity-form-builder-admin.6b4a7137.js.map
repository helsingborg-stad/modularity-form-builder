{"version":3,"file":"js/modularity-form-builder-admin.6b4a7137.js","mappings":"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","sources":["webpack://@helsingborg-stad/modularity-form-builder/./source/js/admin/conditional-notification.js","webpack://@helsingborg-stad/modularity-form-builder/webpack/bootstrap","webpack://@helsingborg-stad/modularity-form-builder/webpack/runtime/compat get default export","webpack://@helsingborg-stad/modularity-form-builder/webpack/runtime/define property getters","webpack://@helsingborg-stad/modularity-form-builder/webpack/runtime/hasOwnProperty shorthand","webpack://@helsingborg-stad/modularity-form-builder/./source/js/admin/external-upload.js","webpack://@helsingborg-stad/modularity-form-builder/./source/js/admin/edit-form.js","webpack://@helsingborg-stad/modularity-form-builder/./source/js/admin/conditional-admin.js","webpack://@helsingborg-stad/modularity-form-builder/./source/js/modularity-form-builder-admin.js"],"sourcesContent":["\n (function ($) {\n\n    var selectionsArray = [];\n\n    function Notification() {\n\n        $(function(){\n            //Init from saved data\n            this.init();\n\n            //Get some fresh data (from form)\n            this.dataGathering();\n\n            //Update selects\n            this.updateMainSelect();\n            this.updateSubSelect();\n\n            //Reload datas where an update might have happend\n            $(document).on('click', '.post-type-mod-form input[type=\"checkbox\"], .post-type-mod-form .acf-tab-button', function(event){\n\n                //Get some fresh data (init)\n                this.dataGathering();\n\n                //Update selects\n                this.updateMainSelect();\n                this.updateSubSelect();\n\n            }.bind(this));\n\n\n            //Update subselect when main select is changed\n            $(\"[data-name='form_conditional_field'] .acf-input select\").change(function(event){\n                this.updateSubSelect();\n            }.bind(this));\n\n        }.bind(this));\n    }\n\n    Notification.prototype.init = function() {\n        if(typeof notificationConditions != 'undefined' && notificationConditions !== null) {\n            notificationConditions = JSON.parse(notificationConditions);\n            [\"conditional_field\", \"conditional_field_equals\"].forEach(function(fieldType){\n                $(\"[data-name='notify'] .acf-row:not(.acf-clone)\").each(function(row_index, row){\n                    if(notificationConditions[row_index] !== null) {\n                        var currentSelect = $(\"[data-name='form_\" + fieldType + \"'] .acf-input select\", row);\n                            currentSelect.empty();\n                            currentSelect.append($(\"<option></option>\").attr(\"value\",notificationConditions[row_index][fieldType]).text(notificationConditions[row_index][fieldType]).attr('selected', 'selected'));\n                    }\n                });\n            });\n        }\n    };\n\n    Notification.prototype.updateMainSelect = function() {\n        $(\"[data-name='notify'] .acf-row:not(.acf-clone)\").each(function(row_index, row){\n\n            //Get conditional field\n            var conditionalField = $(\"[data-name='form_conditional_field'] .acf-input select\", row);\n\n            //Get previous value\n            var previousValue       = $(conditionalField).val();\n\n            //Empty field(s)\n            $(conditionalField).empty();\n\n            //Add selectable values\n            $.each(selectionsArray, function(value_index, value){\n                if(previousValue == value_index) {\n                    $(conditionalField).append($(\"<option></option>\").attr(\"value\",value_index).text(value_index).attr('selected', 'selected'));\n                } else {\n                    $(conditionalField).append($(\"<option></option>\").attr(\"value\",value_index).text(value_index));\n                }\n            });\n\n        }.bind(this));\n    }\n\n    Notification.prototype.updateSubSelect = function() {\n        $(\"[data-name='notify'] .acf-row:not(.acf-clone)\").each(function(row_index, row){\n\n            //Get conditional field\n            var conditionalFieldEquals = $(\"[data-name='form_conditional_field_equals'] .acf-input select\", row);\n            var conditionalField = $(\"[data-name='form_conditional_field'] .acf-input select\", row);\n\n            //Get previous value\n            var previousValueEquals = $(conditionalFieldEquals).val();\n            var previousValue       = $(conditionalField).val();\n\n            //Empty field(s)\n            $(conditionalFieldEquals).empty();\n\n            //Add selectable values\n            $.each(selectionsArray, function(value_index, value){\n                if (conditionalField.val() == value_index) {\n                    //Fill avabile selects\n                    $.each(selectionsArray[value_index], function(i, v) {\n                        if(previousValueEquals == v) {\n                            $(conditionalFieldEquals).append($(\"<option></option>\").attr(\"value\",v).text(v).attr('selected', 'selected'));\n                        } else {\n                            $(conditionalFieldEquals).append($(\"<option></option>\").attr(\"value\",v).text(v));\n                        }\n                    });\n                }\n            });\n\n        }.bind(this));\n    }\n\n    Notification.prototype.dataGathering = function () {\n\n        //Reset\n        selectionsArray = {};\n\n        $(\"[data-name='form_fields'] .layout\").each(function(layout_index, layout){\n\n            //Get current layout\n            var currentLayout = $(layout).attr('data-layout');\n            var currentNameKey = $(\".acf-fields  [data-name='label'] .acf-input .acf-input-wrap input\", layout).val();\n\n            //Check i valid\n            if(['select', 'radio'].indexOf(currentLayout) != -1) {\n\n                var isRequired      = $(\"[data-name='required'] .acf-input label input\", layout).prop('checked'); // Check if field is required\n                var hasCondition    = $(\"[data-name='conditional_logic'] .acf-input label input\", layout).prop('checked'); // Check is field is conditional\n\n                if(isRequired && !hasCondition) {\n\n                    //Define where to store values\n                    selectionsArray[currentNameKey] = [];\n\n                    //Get & filter data vars\n                    var dataField = $(\"[data-name='values'] tbody [data-name='value'] .acf-input .acf-input-wrap input[type='text']\", layout);\n\n                    //Check that field isen't clone\n                    $(dataField).filter(function(item_key, item_value) { // Not a clone field?\n                        if($(item_value).attr('name').includes(\"acfclonefield\")) {\n                            return false;\n                        }\n                        return true;\n                    }).each(function(data_index, data_value){\n                        if($(data_value).val() && currentNameKey) {\n                            selectionsArray[currentNameKey].push($(data_value).val());\n                        }\n                    }.bind(this));\n                }\n            }\n        });\n    }\n\n    return new Notification();\n\n})(jQuery);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export default (function ($) {\n\n    function externalUpload() {\n        $(function() {\n          if (!formbuilder.mod_form_authorized) {\n            $('[data-name=\"upload_videos_external\"]').hide();\n          }\n        }.bind(this));\n    }\n\n  return new externalUpload();\n\n})(jQuery);\n","export default (function ($) {\n\n    function EditForm() {\n        $(function(){\n            this.handleEvents();\n        }.bind(this));\n    }\n\n    /**\n     * Delete file\n     * @return {void}\n     */\n    EditForm.prototype.deleteFile = function(postId, formId, filePath, fieldName, target) {\n        $.ajax({\n            url: ajaxurl,\n            type: 'post',\n            data: {\n                action    : 'delete_file',\n                postId    : postId,\n                formId    : formId,\n                filePath  : filePath,\n                fieldName : fieldName\n            },\n            beforeSend: function(response) {\n                target.remove();\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n                console.log('Error: ' + textStatus);\n            }\n        });\n    };\n\n    /**\n     * Upload files\n     * @return {void}\n     */\n    EditForm.prototype.uploadFile = function (files, postId, formId, fieldName, target) {\n        var data = new FormData();\n            data.append('action', 'upload_files');\n            data.append('postId', postId);\n            data.append('formId', formId);\n            data.append('fieldName', fieldName);\n        $.each(files, function(key, value)\n        {\n            data.append(fieldName + '[]', value);\n        });\n\n        $.ajax({\n            url: ajaxurl,\n            type: 'POST',\n            data: data,\n            cache: false,\n            dataType: 'json',\n            processData: false,\n            contentType: false,\n            beforeSend: function(response) {\n                $('input[type=file]', target).hide();\n                $('.upload-status', target).html('<div class=\"spinner spinner-dark is-active\" style=\"float:none;\"></div>');\n            },\n            success: function(response, textStatus, jqXHR) {\n                if (response.success) {\n                    $(':submit', '#publishing-action,#edit-post').trigger('click');\n                }\n\n                $('.upload-status', target).html('<p>' + response.data + '</p>');\n                $('input[type=file]', target).show();\n            },\n            error: function(jqXHR, textStatus) {\n                console.log('error: ' + textStatus);\n                $('input[type=file]', target).show();\n                $('.upload-status', target).hide();\n            }\n        });\n    };\n\n    EditForm.prototype.savePost = function (event) {\n        var $form = $(event.target);\n        var data = new FormData(event.target);\n            data.append('action', 'save_post');\n\n        $form.find('button[type=\"submit\"]').attr('disabled', 'true').append('<span class=\"spinner\"></span>');\n\n        $.ajax({\n            url: ajaxurl,\n            type: 'POST',\n            data: data,\n            dataType: 'json',\n            processData: false,\n            contentType: false,\n            success: function(response) {\n                if (response.success) {\n                    $form.find('button[type=\"submit\"]').append('<i class=\"pricon pricon-check\"></i>').find('.spinner').hide();\n                } else {\n                    $('.modal-footer', $form).html('<span class=\"notice warning\"><i class=\"pricon pricon-notice-warning\"></i> ' + response.data + '</span>');\n                }\n            },\n            complete: function () {\n                location.hash = '';\n                location.reload();\n            }\n        });\n\n        return false;\n    };\n\n    /**\n     * Handle events\n     * @return {void}\n     */\n    EditForm.prototype.handleEvents = function () {\n        $(document).on('submit', '#edit-post', function (e) {\n            e.preventDefault();\n            this.savePost(e);\n        }.bind(this));\n\n        $(document).on('click', '.delete-form-file', function (e) {\n            e.preventDefault();\n            if (window.confirm(formbuilder.delete_confirm)) {\n                var postId    = $(e.target).attr('postid'),\n                    formId    = $(e.target).attr('formid'),\n                    filePath  = $(e.target).attr('filepath'),\n                    fieldName = $(e.target).attr('fieldname'),\n                    $target   = $(e.target).parents('span');\n                this.deleteFile(postId, formId, filePath, fieldName, $target);\n            }\n        }.bind(this));\n\n        $(document).on('change', 'input[type=file]', function(e) {\n            var files     = e.target.files,\n                postId    = $(e.target).attr('postid'),\n                formId    = $(e.target).attr('formid'),\n                fieldName = $(e.target).attr('fieldname'),\n                $target   = $(e.target).parents('.mod-form-field');\n\n            this.uploadFile(files, postId, formId, fieldName, $target);\n        }.bind(this));\n    };\n\n    return new EditForm();\n\n})(jQuery);\n","export default (function ($) {\n\n    function Conditional() {\n        $(document).ready(function () {\n        \tthis.populateSelectFields();\n        \tthis.handleEvents();\n\t\t\tthis.handleAcfConditionals();\n        }.bind(this));\n    }\n\n\tConditional.prototype.handleAcfConditionals = () => {\n\t\tif (typeof(acf) !== 'undefined') {\n\t\t\tconst forms = document.querySelectorAll('.acf-field[data-name=\"form_fields\"]');\n\t\t\tforms.forEach(form => {\n\t\t\t\tconst conditionalFields = document.querySelectorAll('[data-name=\"conditonal_field\"]');\n\t\t\t\tconsole.log(conditionalFields);\n\n\t\t\t\tif (conditionalFields) {\n\t\t\t\t\tConditional.prototype.handleSelectedConditionalFields(conditionalFields);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tConditional.prototype.handleSelectedConditionalFields = function (conditionalFields) {\n\t\tconditionalFields.forEach(field => {\n\t\t\tconst selectField = field.querySelector('select');\n\t\t\tconst hiddenField = field.querySelector('input[type=\"hidden\"]');\n\n\t\t\tif (hiddenField && hiddenField.value) {\n\t\t\t\tselectField.value = hiddenField.value;\n\t\t\t}\n\t\t});\n\t}\n\n    /**\n     * Populate conditional field selectors\n     * @return {void}\n     */\n    Conditional.prototype.populateSelectFields = function() {\n        $('[data-name=\"conditonal_field\"] select').each(function (index, element) {\n\n        \t// Check if selected value is set or exist in db\n\t\t\tvar selected  = '',\n\t\t\t\t$selected = $(':selected', element);\n\n\t\t\tif ($selected.val()) {\n\t\t\t\tselected = $selected.val();\n\t\t\t} else {\n\t\t\t\t// Get selected from database\n\t\t\t\tif (typeof modularity_current_post_id !== 'undefined') {\n\t\t\t\t\tvar fieldName = $(element).attr('name');\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: ajaxurl,\n\t\t\t\t\t\ttype: 'post',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\taction    : 'get_selected_field',\n\t\t\t\t\t\t\tmoduleId  : modularity_current_post_id,\n\t\t\t\t\t\t\tfieldName : fieldName\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\t\tif (response != 'error') {\n\t\t\t\t\t\t\t\t$(\"option[value='\" + response + \"']\", element).prop('selected', true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Reset select options\n            $('optgroup, option', element).remove();\n\n            // Populate select options\n            var options = this.getOptions();\n            if (typeof options !== 'undefined' && options.length > 0) {\n            \t$('.condition-missing').remove();\n\t            $.each(options, function(key, value) {\n\t            \tvar selectvalues = '';\n\n\t            \t$.each(value.selectvalues, function(key, option) {\n\t            \t\tvar groubLabel = this.conditionalString(value.groupLabel),\n\t            \t\t\toptionValue = this.conditionalString(option),\n\t            \t\t\toptionObj = {\n\t            \t\t\t\tlabel: groubLabel,\n\t            \t\t\t\tvalue: optionValue\n\t            \t\t\t};\n\t            \t\tselectvalues += \"<option value='\" + JSON.stringify(optionObj) + \"'>\" + option + \"</option>\";\n\t\t            }.bind(this));\n\n\t\t            var optgroup = '<optgroup label=\"' + value.groupLabel + '\">' + selectvalues + '</optgroup>';\n\t\t            $(element).append(optgroup);\n\n\t\t            if (selected) {\n\t\t            \t$(\"option[value='\" + selected + \"']\", element).prop('selected', true);\n\t\t            }\n\n\t\t\t\t}.bind(this));\n\t        } else {\n\t        \t$('.condition-missing').remove();\n\t        \t$('<p class=\"condition-missing\">' + formbuilder.selections_missing + '</p>').insertBefore(element);\n\t        }\n\n        }.bind(this));\n    };\n\n    Conditional.prototype.getOptions = function(argument) {\n    \tvar selectOptions = [];\n\n    \t$('[data-layout=\"radio\"]:not(.acf-clone)').each(function (index, item) {\n    \t\tvar $item = $(item);\n            var value = $item.find('[data-name=\"label\"] input').val();\n            var optionGroup = {\n            \tgroupLabel : value,\n            \tselectvalues : []\n            };\n\n\t        $('[data-key=\"field_58eb670d39fef\"] table tbody', item).children('tr.acf-row:not(.acf-clone)').each(function (index, item) {\n\t            var $item = $(item);\n\t            var value = $item.find('[data-name=\"value\"] input').val();\n\t            optionGroup.selectvalues.push(value);\n\t        });\n\n\t       \tselectOptions.push(optionGroup);\n    \t});\n\n        return selectOptions;\n    };\n\n    Conditional.prototype.conditionalString = function(string) {\n    \tstring = string.toLowerCase();\n    \tstring = string.replace(/\\s+/g, '_');\n    \tstring = string.replace(/[^a-z0-9_]+/ig, '');\n    \tstring = string.replace(/_+$/, '');\n\n    \treturn string;\n    };\n\n    Conditional.prototype.handleEvents = function () {\n    \t$(document).on('click', '[data-name=\"conditional_logic\"] [type=\"checkbox\"], [data-layout=\"radio\"] .acf-row-handle > a', function () {\n        \tthis.populateSelectFields();\n        }.bind(this));\n    };\n\n\treturn new Conditional();\n\n})(jQuery);\n","import ExternalUpload from './admin/external-upload';\nimport EditForm from './admin/edit-form';\nimport ConditionalNotification from './admin/conditional-notification';\nimport ConditionalAdmin from './admin/conditional-admin';\n\nconst FormBuilderAdmin = {\n  ExternalUpload,\n  EditForm,\n  ConditionalNotification,\n  ConditionalAdmin,\n};\n"],"names":["$","selectionsArray","Notification","this","init","dataGathering","updateMainSelect","updateSubSelect","document","on","event","bind","change","prototype","notificationConditions","JSON","parse","forEach","fieldType","each","row_index","row","currentSelect","empty","append","attr","text","conditionalField","previousValue","val","value_index","value","conditionalFieldEquals","previousValueEquals","i","v","layout_index","layout","currentLayout","currentNameKey","indexOf","isRequired","prop","hasCondition","dataField","filter","item_key","item_value","includes","data_index","data_value","push","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","hasOwnProperty","call","formbuilder","mod_form_authorized","hide","EditForm","handleEvents","deleteFile","postId","formId","filePath","fieldName","target","ajax","url","ajaxurl","type","data","action","beforeSend","response","remove","error","jqXHR","textStatus","errorThrown","console","log","uploadFile","files","FormData","cache","dataType","processData","contentType","html","success","trigger","show","savePost","$form","find","complete","location","hash","reload","e","preventDefault","window","confirm","delete_confirm","$target","parents","Conditional","ready","populateSelectFields","handleAcfConditionals","acf","querySelectorAll","form","conditionalFields","handleSelectedConditionalFields","field","selectField","querySelector","hiddenField","index","element","selected","$selected","modularity_current_post_id","options","getOptions","length","selectvalues","option","optionObj","label","conditionalString","groupLabel","stringify","optgroup","selections_missing","insertBefore","argument","selectOptions","item","optionGroup","children","string","toLowerCase","replace"],"ignoreList":[],"sourceRoot":""}