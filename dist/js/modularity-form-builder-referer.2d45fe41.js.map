{"version":3,"file":"js/modularity-form-builder-referer.2d45fe41.js","mappings":"mBAMA,IAAIA,EAAuB,KACvBC,EAAgB,KAoGpB,IAlGe,MAKXC,WAAAA,GAE6B,oBAAbC,SACRC,KAAKC,YAEb,CAOAC,eAAAA,CAAgBC,GACZ,IAEIC,EADAC,EADUC,mBAAmBC,OAAOC,SAASC,OAAOC,UAAU,IAC5CC,MAAM,KAG5B,IAAK,IAAIC,EAAI,EAAGA,EAAIP,EAAQQ,OAAQD,IAGhC,GAFAR,EAAYC,EAAQO,GAAGD,MAAM,KAEzBP,EAAU,KAAOD,EACjB,YAAwBW,IAAjBV,EAAU,IAA0BA,EAAU,EAGjE,CAOAW,YAAAA,CAAaC,GACT,OAAOC,aAAaC,QAAQF,EAChC,CAKAf,UAAAA,GAEQD,KAAKe,aAAa,mBAAqBR,OAAOC,SAASW,OAEnDnB,KAAKE,gBAAgB,mBAErBN,EAAuBqB,aAAaG,QAChC,uBACAd,mBACIN,KAAKE,gBAAgB,oBAI7BL,EAAgBoB,aAAaG,QACzB,uBACAd,mBACIN,KAAKE,gBAAgB,0BAK7BN,EAAuBqB,aAAaG,QAChC,uBACApB,KAAKe,aAAa,kBAGtBlB,EAAgBoB,aAAaG,QACzB,gBACAb,OAAOC,SAASW,QAK5BnB,KAAKqB,yBACT,CAKAA,uBAAAA,GAEQC,SAASC,cAAc,0CACoD,IAA3ED,SAASC,cAAc,yCAAyCV,SAChES,SAASC,cAAc,yCAAyCC,MAAQxB,KAAKe,aACzE,wBAGJO,SAASC,cAAc,qCAAqCC,MAAQxB,KAAKe,aACrE,iBAGZ,E","sources":["webpack://@helsingborg-stad/modularity-form-builder/./source/js/modularity-form-builder-referer.js"],"sourcesContent":["/**\n * Modularity form builder referer\n * Adds referer address and page address to hidden field in form.\n * (Register the page previously visit and the form page)\n */\n\nlet refUrlStorageHistory = null;\nlet refUrlStorage = null;\n\nexport default class ModularityFormBuilderReferer {\n\n    /**\n     * Create Local Storage.\n     */\n    constructor() {\n\n        if (typeof (Storage) !== 'undefined') {\n            this.setStorage();\n        }\n    };\n\n    /**\n     * Fetches url parameter\n     * @param uriParam\n     * @returns {boolean|string}\n     */\n    getUrlParameter(uriParam) {\n        let pageUri = decodeURIComponent(window.location.search.substring(1)),\n            uriVars = pageUri.split('&'),\n            paramName;\n\n        for (let i = 0; i < uriVars.length; i++) {\n            paramName = uriVars[i].split('=');\n\n            if (paramName[0] === uriParam) {\n                return paramName[1] === undefined ? true : paramName[1];\n            }\n        }\n    };\n\n    /**\n     * Check local storage\n     * @param storageType\n     * @returns {string}\n     */\n    checkStorage(storageType) {\n        return localStorage.getItem(storageType);\n    };\n\n    /**\n     *  Creates a Local storage\n     */\n    setStorage() {\n\n        if (this.checkStorage('refUrlStorage') !== window.location.href) {\n\n            if (this.getUrlParameter('modularityForm')) {\n\n                refUrlStorageHistory = localStorage.setItem(\n                    'refUrlStorageHistory',\n                    decodeURIComponent(\n                        this.getUrlParameter('modularityForm')\n                    )\n                );\n\n                refUrlStorage = localStorage.setItem(\n                    'refUrlStorageHistory',\n                    decodeURIComponent(\n                        this.getUrlParameter('modularityReferrer'))\n                );\n\n            } else {\n\n                refUrlStorageHistory = localStorage.setItem(\n                    'refUrlStorageHistory',\n                    this.checkStorage('refUrlStorage')\n                );\n\n                refUrlStorage = localStorage.setItem(\n                    'refUrlStorage',\n                    window.location.href\n                );\n            }\n        }\n\n        this.addStorageRefererToDoom();\n    };\n\n    /**\n     *  Adding referer URL to doom\n     */\n    addStorageRefererToDoom() {\n    \n        if (document.querySelector(\"input[name='modularity-form-history']\") &&\n            document.querySelector(\"input[name='modularity-form-history']\").length !== 0) {\n            document.querySelector(\"input[name='modularity-form-history']\").value = this.checkStorage(\n                'refUrlStorageHistory'\n            );\n\n            document.querySelector(\"input[name='modularity-form-url']\").value = this.checkStorage(\n                'refUrlStorage'\n            );\n        }\n    };\n\n}\n\nnew ModularityFormBuilderReferer();\n"],"names":["refUrlStorageHistory","refUrlStorage","constructor","Storage","this","setStorage","getUrlParameter","uriParam","paramName","uriVars","decodeURIComponent","window","location","search","substring","split","i","length","undefined","checkStorage","storageType","localStorage","getItem","href","setItem","addStorageRefererToDoom","document","querySelector","value"],"ignoreList":[],"sourceRoot":""}