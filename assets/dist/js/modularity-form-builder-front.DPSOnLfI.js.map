{"version":3,"file":"modularity-form-builder-front.DPSOnLfI.js","sources":["../../../source/js/front/get-location.ts","../../../source/js/front/handle-conditions.ts"],"sourcesContent":["export default (($) => {\n\tvar componentForm = {\n\t\tstreet_number: { name: 'street', addressType: 'short_name' },\n\t\troute: { name: 'street', addressType: 'short_name' },\n\t\tlocality: { name: 'city', addressType: 'long_name' },\n\t\tpostal_code: { name: 'postal-code', addressType: 'long_name' },\n\t};\n\n\tfunction GetLocation() {\n\t\tvar locationButton = document.getElementById('form-get-location');\n\t\tif (!navigator.geolocation || locationButton === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.handleEvents();\n\t}\n\n\tGetLocation.prototype.handleEvents = function () {\n\t\t$('#form-get-location').click(\n\t\t\t((e) => {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t$target = $(e.target).parents('[class*=\"mod-form\"]');\n\t\t\t\t$(e.target).find('.pricon').removeClass().addClass('spinner spinner-dark');\n\n\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\t(position) => {\n\t\t\t\t\t\tvar lat = position.coords.latitude,\n\t\t\t\t\t\t\tlng = position.coords.longitude,\n\t\t\t\t\t\t\tgoogleMapsPos = new google.maps.LatLng(lat, lng),\n\t\t\t\t\t\t\tgoogleMapsGeocoder = new google.maps.Geocoder();\n\n\t\t\t\t\t\tgoogleMapsGeocoder.geocode({ latLng: googleMapsPos }, (results, status) => {\n\t\t\t\t\t\t\tvar fullAddress = [];\n\n\t\t\t\t\t\t\tif (status == google.maps.GeocoderStatus.OK && results[0]) {\n\t\t\t\t\t\t\t\t// Get each component of the address from the place details and fill the form\n\t\t\t\t\t\t\t\tfor (var i = 0; i < results[0].address_components.length; i++) {\n\t\t\t\t\t\t\t\t\tvar addressType = results[0].address_components[i].types[0];\n\n\t\t\t\t\t\t\t\t\tif (componentForm[addressType]) {\n\t\t\t\t\t\t\t\t\t\tvar value = results[0].address_components[i][componentForm[addressType].addressType];\n\t\t\t\t\t\t\t\t\t\t$target.find('[id$=\"address-' + componentForm[addressType].name + '\"]').val(value);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Combine street name and street number\n\t\t\t\t\t\t\t\t\tif (addressType == 'route') {\n\t\t\t\t\t\t\t\t\t\tfullAddress[0] = value;\n\t\t\t\t\t\t\t\t\t} else if (addressType == 'street_number') {\n\t\t\t\t\t\t\t\t\t\tfullAddress[1] = value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t$target.find('[id$=\"address-street\"]').val(fullAddress.join(' '));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Reset button icon\n\t\t\t\t\t\t$(e.target).find('.spinner').removeClass().addClass('pricon pricon-location-pin');\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\t// Show message if Geolocate went wrong\n\t\t\t\t\t\t$(e.target).html(\n\t\t\t\t\t\t\t'<span><i class=\"pricon pricon-notice-warning\"></i> ' + formbuilder.something_went_wrong + '</span>',\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}).bind(this),\n\t\t);\n\t};\n\n\treturn new GetLocation();\n})(jQuery);\n","export default (($) => {\n\tfunction HandleConditions() {\n\t\tthis.handleRequired();\n\t\tthis.handleEvents();\n\t}\n\n\tHandleConditions.prototype.handleRequired = () => {\n\t\tconst target = $('[class*=\"mod-form\"]');\n\t\t$('[conditional-target]:hidden', target).find('[required]').prop('required', false).attr('hidden-required', true);\n\t\t$('[conditional-target]:visible', target).find('[hidden-required]').prop('required', true);\n\t};\n\n\tHandleConditions.prototype.handleEvents = function () {\n\t\t$('input[conditional]').change(\n\t\t\tfunction (e) {\n\t\t\t\tconst target = $(e.target).parents('[class*=\"mod-form\"]');\n\t\t\t\tvar conditional = $(e.target).attr('conditional');\n\t\t\t\tif (typeof conditional !== 'undefined' && conditional.length > 0) {\n\t\t\t\t\tconditional = conditional.replaceAll(\"'\", '\"'); //HTML attribute breaks when using double quotes, therefore single quotes are used\n\t\t\t\t\tvar conditionObj = JSON.parse(conditional);\n\n\t\t\t\t\ttarget.find('div[conditional-target^=\\'{\"label\":\"' + conditionObj.label + '\",\\']').hide();\n\t\t\t\t\ttarget.find(\"div[conditional-target='\" + conditional + \"']\").show();\n\t\t\t\t}\n\n\t\t\t\tthis.handleRequired();\n\t\t\t}.bind(this),\n\t\t);\n\t};\n\n\treturn new HandleConditions();\n})(jQuery);\n"],"names":[],"mappings":"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"}