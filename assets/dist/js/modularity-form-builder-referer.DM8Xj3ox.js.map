{"version":3,"file":"modularity-form-builder-referer.DM8Xj3ox.js","sources":["../../../source/js/modularity-form-builder-referer.ts"],"sourcesContent":["/**\n * Modularity form builder referer\n * Adds referer address and page address to hidden field in form.\n * (Register the page previously visit and the form page)\n */\n\nlet refUrlStorageHistory = null;\nlet refUrlStorage = null;\n\nexport default class ModularityFormBuilderReferer {\n\t/**\n\t * Create Local Storage.\n\t */\n\tconstructor() {\n\t\tif (typeof Storage !== 'undefined') {\n\t\t\tthis.setStorage();\n\t\t}\n\t}\n\n\t/**\n\t * Fetches url parameter\n\t * @param uriParam\n\t * @returns {boolean|string}\n\t */\n\tgetUrlParameter(uriParam) {\n\t\tlet pageUri = decodeURIComponent(window.location.search.substring(1)),\n\t\t\turiVars = pageUri.split('&'),\n\t\t\tparamName;\n\n\t\tfor (let i = 0; i < uriVars.length; i++) {\n\t\t\tparamName = uriVars[i].split('=');\n\n\t\t\tif (paramName[0] === uriParam) {\n\t\t\t\treturn paramName[1] === undefined ? true : paramName[1];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Check local storage\n\t * @param storageType\n\t * @returns {string}\n\t */\n\tcheckStorage(storageType) {\n\t\treturn localStorage.getItem(storageType);\n\t}\n\n\t/**\n\t *  Creates a Local storage\n\t */\n\tsetStorage() {\n\t\tif (this.checkStorage('refUrlStorage') !== window.location.href) {\n\t\t\tif (this.getUrlParameter('modularityForm')) {\n\t\t\t\trefUrlStorageHistory = localStorage.setItem(\n\t\t\t\t\t'refUrlStorageHistory',\n\t\t\t\t\tdecodeURIComponent(this.getUrlParameter('modularityForm')),\n\t\t\t\t);\n\n\t\t\t\trefUrlStorage = localStorage.setItem(\n\t\t\t\t\t'refUrlStorageHistory',\n\t\t\t\t\tdecodeURIComponent(this.getUrlParameter('modularityReferrer')),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\trefUrlStorageHistory = localStorage.setItem('refUrlStorageHistory', this.checkStorage('refUrlStorage'));\n\n\t\t\t\trefUrlStorage = localStorage.setItem('refUrlStorage', window.location.href);\n\t\t\t}\n\t\t}\n\n\t\tthis.addStorageRefererToDoom();\n\t}\n\n\t/**\n\t *  Adding referer URL to doom\n\t */\n\taddStorageRefererToDoom() {\n\t\tif (\n\t\t\tdocument.querySelector(\"input[name='modularity-form-history']\") &&\n\t\t\tdocument.querySelector(\"input[name='modularity-form-history']\").length !== 0\n\t\t) {\n\t\t\tdocument.querySelector(\"input[name='modularity-form-history']\").value = this.checkStorage('refUrlStorageHistory');\n\n\t\t\tdocument.querySelector(\"input[name='modularity-form-url']\").value = this.checkStorage('refUrlStorage');\n\t\t}\n\t}\n}\n\nnew ModularityFormBuilderReferer();\n"],"names":[],"mappings":"gHASA,MAAqB,8BAArB,MAAqB,6BAA6B,CAIjD,aAAc,CACT,OAAO,QAAY,KACtB,KAAK,WAAA,CAEP,CAOA,gBAAgB,SAAU,CACzB,IAAI,QAAU,mBAAmB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC,EACnE,QAAU,QAAQ,MAAM,GAAG,EAC3B,UAED,QAAS,EAAI,EAAG,EAAI,QAAQ,OAAQ,IAGnC,GAFA,UAAY,QAAQ,CAAC,EAAE,MAAM,GAAG,EAE5B,UAAU,CAAC,IAAM,SACpB,OAAO,UAAU,CAAC,IAAM,OAAY,GAAO,UAAU,CAAC,CAGzD,CAOA,aAAa,YAAa,CACzB,OAAO,aAAa,QAAQ,WAAW,CACxC,CAKA,YAAa,CACR,KAAK,aAAa,eAAe,IAAM,OAAO,SAAS,OACtD,KAAK,gBAAgB,gBAAgB,GACjB,aAAa,QACnC,uBACA,mBAAmB,KAAK,gBAAgB,gBAAgB,CAAC,CAAA,EAG1C,aAAa,QAC5B,uBACA,mBAAmB,KAAK,gBAAgB,oBAAoB,CAAC,CAAA,IAGvC,aAAa,QAAQ,uBAAwB,KAAK,aAAa,eAAe,CAAC,EAEtF,aAAa,QAAQ,gBAAiB,OAAO,SAAS,IAAI,IAI5E,KAAK,wBAAA,CACN,CAKA,yBAA0B,CAExB,SAAS,cAAc,uCAAuC,GAC9D,SAAS,cAAc,uCAAuC,EAAE,SAAW,IAE3E,SAAS,cAAc,uCAAuC,EAAE,MAAQ,KAAK,aAAa,sBAAsB,EAEhH,SAAS,cAAc,mCAAmC,EAAE,MAAQ,KAAK,aAAa,eAAe,EAEvG,CACD,EA5EkD,qEAAlD,IAAqB,6BAArB,8BA8EA,IAAI"}